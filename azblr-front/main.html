<!doctype html>
<html lang="ko">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="/bootstrap/css/cover.css">
    <link rel="shortcut icon" href="/img/favicon.ico">

    <title>AzeriteBlender: May the best traits win!</title>
  </head>
  <body>
    <div class="cover-container d-flex w-100 h-100 p-3 mx-auto flex-column">
      <header class="masthead mb-5">
        <div class="inner">
          <a class="navbar-brand" href="/"><h4 class="masthead-brand">AzrtBlndr</h4></a>
          <nav class="nav nav-masthead justify-content-center">
            <a class="nav-link" href="#" id="manual-button" data-toggle="modal" data-target="#manual-modal">사용법</a>
            <a class="d-none nav-link" href="/login.html" id="login-button">로그인</a>
            <a class="d-none nav-link" href="#" id="logout-button">로그아웃</a>
          </nav>
        </div>
      </header>
    
      <main role="main" class="inner cover">
        <h1 class="cover-heading">AzeriteBlender</h1>
        <p class="lead">AzeriteBlender는 <a href="htts://bloodmallet.com">bloodmallet.com</a>의 아제라이트 특성 점수 데이터를 이용하여 당신의 장비들 중 최고의 특성 조합을 계산합니다. 아래에서 직업과 전문화를 선택하세요.</p>
        <div class="row justify-content-md-center" id="class-row">
        </div>
      </main>
    
      <footer class="mastfoot mt-auto">
        <div class="inner">
          <!-- <p>Cover template for <a href="https://getbootstrap.com/">Bootstrap</a>, by <a href="https://twitter.com/mdo">@mdo</a>.</p> -->
        </div>
      </footer>
    </div>

    <!-- Modal -->
    <div id="man-modal"></div>

    <!-- Optional JavaScript -->
    <script src="/js/jquery-3.3.1.min.js"></script>
    <script src="/bootstrap/js/bootstrap.min.js"></script>
    <script src="/js/navbar.js"></script>
    <script>
      $(document).ready(function() {
        // class-specialization
        $.ajax({
          url: "http://localhost:5000/api/meta/class",
          type: 'get',
          success: function(data) {
            for(var class_id in data) {
              var sps = data[class_id]["specializations"]

              var _table = $('<table/>', {
                class: "table table-dark table-bordered col-"+Object.keys(sps).length,
                css: {
                  color: data[class_id]["color"]
                }
              })
              
              $('<thead/>').append($('<tr/>').append($('<th/>', {
                colspan: Object.keys(sps).length,
                text: data[class_id]["name"]
              }))).appendTo(_table)

              var _tbody = $('<tbody/>')
              var _tr = $('<tr/>')
              for(var sp_id in sps) {
                $('<td/>').append($('<a/>', {
                  href: "/scoring.html?c_id="+class_id+"&sp_id="+sp_id+"&csp_name="+encodeURIComponent(data[class_id]["name"]+" ("+sps[sp_id]['name']+")")+"&c_color="+encodeURIComponent(data[class_id]["color"]),
                  text: sps[sp_id]['name'],
                  css: {
                    color: data[class_id]["color"]
                  }
                })).appendTo(_tr)
              }
              _table.append(_tbody.append(_tr))
              $('#class-row').append(_table)
            }
          }
        })
      })
    </script>
  </body>
</html>